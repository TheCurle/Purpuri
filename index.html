
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://purpuri.gemwire.uk/">
      
      
      
        <link rel="next" href="spec/">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.6">
    
    
      
        <title>Purpuri</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.558e4712.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Purpuri" class="md-header__button md-logo" aria-label="Purpuri" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Purpuri
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Purpuri" class="md-nav__button md-logo" aria-label="Purpuri" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Purpuri
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="." class="md-nav__link md-nav__link--active">
        Overview
      </a>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="spec/" class="md-nav__link">
        JVM Spec
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="overview">Overview</h1>
<p>Purpuri is a custom JVM implementation. It is an interpreter (meaning, no JIT).</p>
<p>Currently, it targets JVMS7 (the JVM Specification for Java 7) and supports most opcodes. A full supported opcode list is provided <a href="spec/">here</a>.</p>
<p>Purpuri provides a native interface (that is not compatible with the standard JNI) called PNI. More details on that will be created in the future.</p>
<p>Purpuri provides a minimal implementation of the Java Standard Library. The only classes in <code>java.*</code> that are provided are <code>java.lang.Object</code>, for it is required by the bytecode specification, and <code>java.lang.System</code>, for its' out field.</p>
<p>Purpuri does no checking on visibility of objects. Every class, method and field is public by default.</p>
<p>Purpuri has no exceptions, or stack unwinding. Problematic code will attempt to continue to run, possibly to the detriment of the host system.</p>
<p>I feel the need at this point, to specify that this is an education and personal project. Purpuri will never evolve to the point where it can replace Hotspot, or OpenJ9.</p>
<p>The name Purpuri means Purple, in Ido (a fork of Esperanto).</p>
<h1 id="getting-started">Getting Started</h1>
<p>To use Purpuri, find or <a href="https://github.com/TheCurle/Purpuri">create</a> a binary. You can find builds on Github Actions or my CI server.</p>
<p>To test it, write and compile a standard Java class. (Make sure it does not use any features or opcodes higher than Java 7)</p>
<p>Note that the entry point is not <code>main([Ljava.lang.String;)V</code> (that is, a "main" method that takes a list of Strings and returns void) like traditional VMs, but <code>EntryPoint()I</code> (that is, an "EntryPoint" method that takes nothing and returns an Integer).  </p>
<p>This means that in order to be deemed worthy of execution by the VM, your class must contain the function:<br />
<code>public static int EntryPoint() {</code></p>
<p>Execute the VM:</p>
<p><code>./Purpuri exec.class</code></p>
<p>Any classes that are referenced by this class are loaded automatically (and classes referenced by those..), so only execute the class containing the <code>EntryPoint</code>.</p>
<p>By default, Purpuri will print enhanced debugging messages to the terminal for every opcode executed for every function called. In this configuration, stdout (System.out.println) messages are collected and printed all at once when the program ends.</p>
<p>If you append the Quiet Mode flag <code>-q</code> to execution:<br />
<code>./Purpuri exec.class -q</code><br />
then enhanced log output is stopped, and all that will be printed is what is sent to stdout by the Java program.</p>
<h1 id="developer-features">Developer Features</h1>
<p>The interpreted nature of Purpuri poses a potential benefit for people looking to debug or optimise their Java programs;<br />
Since every opcode executed generates a status message explaining what has been done (outside of rel-mode, at least), it provides some insight into potential manual optimizations that can't easily be visualized with standard JVMs or debuggers.</p>
<p>On the topic of debuggers however, Purpuri does not support any current Java debugger available.</p>
<p>It is planned that it will eventually support the Java Platform Debugger Architecture (JPDA), but this is a monumental task.</p>
<p>In the interrim, it does provide a basic Visual Debugger built with Dear ImGui.
To enable it, pass the -d flag:</p>
<p><code>./Purpuri exec.class -d</code></p>
<p>Note that the build of Purpuri must have been compiled with this feature enabled.
It increases the size of the executable by a large amount, so it is an optional feature.</p>
<h1 id="disclaimer">Disclaimer</h1>
<p>It was said earlier, but it deserves mention again.</p>
<p>Purpuri <strong><em>is an educational project</em></strong>. It will <strong><em>never be a replacement for traditional VMs</em></strong>. It will <strong><em>never have a JIT architecture</em></strong>.</p>
<p>Use of Purpuri is limited strictly to educational and "fun" ventures due to its nature.</p>
<p>With that out of the way, I'm always accepting bug reports and feature requests (or feature submissions, if you can wrangle the code monster i've created) at <a href="https://github.com/TheCurle/Purpuri">the repository</a>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.51d95adb.min.js"></script>
      
        <script src="search/main.js"></script>
      
    
  </body>
</html>